type: object
properties:
  activeService:
    type:
      - string
      - "null"
    description: Name of the service that the rollout modifies as the active service.
  previewService:
    type:
      - string
      - "null"
    title: |-
      Name of the service that the rollout modifies as the preview service.
      +optional
  previewReplicaCount:
    type:
      - integer
      - "null"
    format: int32
    title: |-
      PreviewReplicaCount is the number of replicas to run for the preview stack before the
      switchover. Once the rollout is resumed the desired replicaset will be full scaled up before the switch occurs
      +optional
  autoPromotionEnabled:
    type:
      - boolean
      - "null"
    title: |-
      AutoPromotionEnabled indicates if the rollout should automatically promote the new ReplicaSet
      to the active service or enter a paused state. If not specified, the default value is true.
      +optional
  autoPromotionSeconds:
    type:
      - integer
      - "null"
    format: int32
    title: |-
      AutoPromotionSeconds is a duration in seconds in which to delay auto-promotion (default: 0).
      The countdown begins after the preview ReplicaSet have reached full availability.
      This option is ignored if autoPromotionEnabled is set to false.
      +optional
  maxUnavailable:
    type:
      - object
      - "null"
    properties:
      type:
        type:
          - string
          - "null"
        format: int64
      intVal:
        type:
          - integer
          - "null"
        format: int32
      strVal:
        type:
          - string
          - "null"
    description: |-
      +protobuf=true
      +protobuf.options.(gogoproto.goproto_stringer)=false
      +k8s:openapi-gen=true
    title: |-
      IntOrString is a type that can hold an int32 or a string.  When used in
      JSON or YAML marshalling and unmarshalling, it produces or consumes the
      inner type.  This allows you to have, for example, a JSON field that can
      accept a name or number.
      TODO: Rename to Int32OrString
  scaleDownDelaySeconds:
    type:
      - integer
      - "null"
    format: int32
    title: |-
      ScaleDownDelaySeconds adds a delay before scaling down the previous replicaset.
      If omitted, the Rollout waits 30 seconds before scaling down the previous ReplicaSet.
      A minimum of 30 seconds is recommended to ensure IP table propagation across the nodes in
      a cluster. See https://github.com/argoproj/argo-rollouts/issues/19#issuecomment-476329960 for
      more information
      +optional
  scaleDownDelayRevisionLimit:
    type:
      - integer
      - "null"
    format: int32
    title: |-
      ScaleDownDelayRevisionLimit limits the number of old RS that can run at one time before getting scaled down
      +optional
  prePromotionAnalysis:
    type:
      - object
      - "null"
    properties:
      templates:
        type:
          - array
          - "null"
        items:
          type:
            - object
            - "null"
          properties:
            templateName:
              type:
                - string
                - "null"
              title: |-
                TemplateName name of template to use in AnalysisRun
                +optional
            clusterScope:
              type:
                - boolean
                - "null"
              title: |-
                Whether to look for the templateName at cluster scope or namespace scope
                +optional
        title: |-
          Templates reference to a list of analysis templates to combine for an AnalysisRun
          +patchMergeKey=templateName
          +patchStrategy=merge
      args:
        type:
          - array
          - "null"
        items:
          type:
            - object
            - "null"
          properties:
            name:
              type:
                - string
                - "null"
              title: Name argument name
            value:
              type:
                - string
                - "null"
              title: Value a hardcoded value for the argument. This field is a one of field with valueFrom
            valueFrom:
              type:
                - object
                - "null"
              properties:
                podTemplateHashValue:
                  type:
                    - string
                    - "null"
                  title: PodTemplateHashValue gets the value from one of the children ReplicaSet's Pod Template Hash
                fieldRef:
                  type:
                    - object
                    - "null"
                  properties:
                    fieldPath:
                      type:
                        - string
                        - "null"
                      title: 'Required: Path of the field to select in the specified API version'
              title: ArgumentValueFrom defines references to fields within resources to grab for the value (i.e. Pod Template Hash)
          title: AnalysisRunArgument argument to add to analysisRun
        title: |-
          Args the arguments that will be added to the AnalysisRuns
          +patchMergeKey=name
          +patchStrategy=merge
      dryRun:
        type:
          - array
          - "null"
        items:
          type:
            - object
            - "null"
          properties:
            metricName:
              type:
                - string
                - "null"
              description: |-
                Name of the metric which needs to be evaluated in the Dry-Run mode. Wildcard '*' is supported and denotes all
                the available metrics.
          description: DryRun defines the settings for running the analysis in Dry-Run mode.
        title: |-
          DryRun object contains the settings for running the analysis in Dry-Run mode
          +patchMergeKey=metricName
          +patchStrategy=merge
          +optional
      measurementRetention:
        type:
          - array
          - "null"
        items:
          type:
            - object
            - "null"
          properties:
            metricName:
              type:
                - string
                - "null"
              description: MetricName is the name of the metric on which this retention policy should be applied.
            limit:
              type:
                - integer
                - "null"
              format: int32
              description: Limit is the maximum number of measurements to be retained for this given metric.
          description: MeasurementRetention defines the settings for retaining the number of measurements during the analysis.
        title: |-
          MeasurementRetention object contains the settings for retaining the number of measurements during the analysis
          +patchMergeKey=metricName
          +patchStrategy=merge
          +optional
      analysisRunMetadata:
        type:
          - object
          - "null"
        properties:
          labels:
            type:
              - object
              - "null"
            additionalProperties:
              type:
                - string
                - "null"
            title: |-
              Labels Additional labels to add to the AnalysisRun
              +optional
          annotations:
            type:
              - object
              - "null"
            additionalProperties:
              type:
                - string
                - "null"
            title: |-
              Annotations additional annotations to add to the AnalysisRun
              +optional
        title: AnalysisRunMetadata extra labels to add to the AnalysisRun
    title: RolloutAnalysis defines a template that is used to create a analysisRun
  antiAffinity:
    type:
      - object
      - "null"
    properties:
      preferredDuringSchedulingIgnoredDuringExecution:
        type:
          - object
          - "null"
        properties:
          weight:
            type:
              - integer
              - "null"
            format: int32
            description: Weight associated with matching the corresponding podAffinityTerm, in the range 1-100.
        title: PreferredDuringSchedulingIgnoredDuringExecution defines the weight of the anti-affinity injection
      requiredDuringSchedulingIgnoredDuringExecution:
        type:
          - object
          - "null"
        title: RequiredDuringSchedulingIgnoredDuringExecution defines inter-pod scheduling rule to be RequiredDuringSchedulingIgnoredDuringExecution
    title: AntiAffinity defines which inter-pod scheduling rule to use for anti-affinity injection
  postPromotionAnalysis:
    type:
      - object
      - "null"
    properties:
      templates:
        type:
          - array
          - "null"
        items:
          type:
            - object
            - "null"
          properties:
            templateName:
              type:
                - string
                - "null"
              title: |-
                TemplateName name of template to use in AnalysisRun
                +optional
            clusterScope:
              type:
                - boolean
                - "null"
              title: |-
                Whether to look for the templateName at cluster scope or namespace scope
                +optional
        title: |-
          Templates reference to a list of analysis templates to combine for an AnalysisRun
          +patchMergeKey=templateName
          +patchStrategy=merge
      args:
        type:
          - array
          - "null"
        items:
          type:
            - object
            - "null"
          properties:
            name:
              type:
                - string
                - "null"
              title: Name argument name
            value:
              type:
                - string
                - "null"
              title: Value a hardcoded value for the argument. This field is a one of field with valueFrom
            valueFrom:
              type:
                - object
                - "null"
              properties:
                podTemplateHashValue:
                  type:
                    - string
                    - "null"
                  title: PodTemplateHashValue gets the value from one of the children ReplicaSet's Pod Template Hash
                fieldRef:
                  type:
                    - object
                    - "null"
                  properties:
                    fieldPath:
                      type:
                        - string
                        - "null"
                      title: 'Required: Path of the field to select in the specified API version'
              title: ArgumentValueFrom defines references to fields within resources to grab for the value (i.e. Pod Template Hash)
          title: AnalysisRunArgument argument to add to analysisRun
        title: |-
          Args the arguments that will be added to the AnalysisRuns
          +patchMergeKey=name
          +patchStrategy=merge
      dryRun:
        type:
          - array
          - "null"
        items:
          type:
            - object
            - "null"
          properties:
            metricName:
              type:
                - string
                - "null"
              description: |-
                Name of the metric which needs to be evaluated in the Dry-Run mode. Wildcard '*' is supported and denotes all
                the available metrics.
          description: DryRun defines the settings for running the analysis in Dry-Run mode.
        title: |-
          DryRun object contains the settings for running the analysis in Dry-Run mode
          +patchMergeKey=metricName
          +patchStrategy=merge
          +optional
      measurementRetention:
        type:
          - array
          - "null"
        items:
          type:
            - object
            - "null"
          properties:
            metricName:
              type:
                - string
                - "null"
              description: MetricName is the name of the metric on which this retention policy should be applied.
            limit:
              type:
                - integer
                - "null"
              format: int32
              description: Limit is the maximum number of measurements to be retained for this given metric.
          description: MeasurementRetention defines the settings for retaining the number of measurements during the analysis.
        title: |-
          MeasurementRetention object contains the settings for retaining the number of measurements during the analysis
          +patchMergeKey=metricName
          +patchStrategy=merge
          +optional
      analysisRunMetadata:
        type:
          - object
          - "null"
        properties:
          labels:
            type:
              - object
              - "null"
            additionalProperties:
              type:
                - string
                - "null"
            title: |-
              Labels Additional labels to add to the AnalysisRun
              +optional
          annotations:
            type:
              - object
              - "null"
            additionalProperties:
              type:
                - string
                - "null"
            title: |-
              Annotations additional annotations to add to the AnalysisRun
              +optional
        title: AnalysisRunMetadata extra labels to add to the AnalysisRun
    title: RolloutAnalysis defines a template that is used to create a analysisRun
  previewMetadata:
    type:
      - object
      - "null"
    properties:
      labels:
        type:
          - object
          - "null"
        additionalProperties:
          type:
            - string
            - "null"
        title: |-
          Labels Additional labels to add to the experiment
          +optional
      annotations:
        type:
          - object
          - "null"
        additionalProperties:
          type:
            - string
            - "null"
        title: |-
          Annotations additional annotations to add to the experiment
          +optional
    title: PodTemplateMetadata extra labels to add to the template
  activeMetadata:
    type:
      - object
      - "null"
    properties:
      labels:
        type:
          - object
          - "null"
        additionalProperties:
          type:
            - string
            - "null"
        title: |-
          Labels Additional labels to add to the experiment
          +optional
      annotations:
        type:
          - object
          - "null"
        additionalProperties:
          type:
            - string
            - "null"
        title: |-
          Annotations additional annotations to add to the experiment
          +optional
    title: PodTemplateMetadata extra labels to add to the template
  abortScaleDownDelaySeconds:
    type:
      - integer
      - "null"
    format: int32
    title: |-
      AbortScaleDownDelaySeconds adds a delay in second before scaling down the preview replicaset
      if update is aborted. 0 means not to scale down.
      Default is 30 second
      +optional
title: BlueGreenStrategy defines parameters for Blue Green deployment
$schema: http://json-schema.org/schema#
