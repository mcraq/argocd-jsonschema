type: object
properties:
  virtualService:
    type:
      - object
      - "null"
    properties:
      name:
        type:
          - string
          - "null"
        title: Name holds the name of the VirtualService
      routes:
        type:
          - array
          - "null"
        items:
          type:
            - string
            - "null"
        description: A list of HTTP routes within VirtualService to edit. If omitted, VirtualService must have a single route of this type.
      tlsRoutes:
        type:
          - array
          - "null"
        items:
          type:
            - object
            - "null"
          properties:
            port:
              type:
                - string
                - "null"
              format: int64
              description: Port number of the TLS Route desired to be matched in the given Istio VirtualService.
            sniHosts:
              type:
                - array
                - "null"
              items:
                type:
                  - string
                  - "null"
              description: A list of all the SNI Hosts of the TLS Route desired to be matched in the given Istio VirtualService.
          description: TLSRoute holds the information on the virtual service's TLS/HTTPS routes that are desired to be matched for changing weights.
        description: A list of TLS/HTTPS routes within VirtualService to edit. If omitted, VirtualService must have a single route of this type.
      tcpRoutes:
        type:
          - array
          - "null"
        items:
          type:
            - object
            - "null"
          properties:
            port:
              type:
                - string
                - "null"
              format: int64
              description: Port number of the TCP Route desired to be matched in the given Istio VirtualService.
          description: TCPRoute holds the information on the virtual service's TCP routes that are desired to be matched for changing weights.
        description: A list of TCP routes within VirtualService to edit. If omitted, VirtualService must have a single route of this type.
    title: IstioVirtualService holds information on the virtual service the rollout needs to modify
  destinationRule:
    type:
      - object
      - "null"
    properties:
      name:
        type:
          - string
          - "null"
        title: Name holds the name of the DestinationRule
      canarySubsetName:
        type:
          - string
          - "null"
        title: CanarySubsetName is the subset name to modify labels with canary ReplicaSet pod template hash value
      stableSubsetName:
        type:
          - string
          - "null"
        title: StableSubsetName is the subset name to modify labels with stable ReplicaSet pod template hash value
    title: IstioDestinationRule is a reference to an Istio DestinationRule to modify and shape traffic
  virtualServices:
    type:
      - array
      - "null"
    items:
      type:
        - object
        - "null"
      properties:
        name:
          type:
            - string
            - "null"
          title: Name holds the name of the VirtualService
        routes:
          type:
            - array
            - "null"
          items:
            type:
              - string
              - "null"
          description: A list of HTTP routes within VirtualService to edit. If omitted, VirtualService must have a single route of this type.
        tlsRoutes:
          type:
            - array
            - "null"
          items:
            type:
              - object
              - "null"
            properties:
              port:
                type:
                  - string
                  - "null"
                format: int64
                description: Port number of the TLS Route desired to be matched in the given Istio VirtualService.
              sniHosts:
                type:
                  - array
                  - "null"
                items:
                  type:
                    - string
                    - "null"
                description: A list of all the SNI Hosts of the TLS Route desired to be matched in the given Istio VirtualService.
            description: TLSRoute holds the information on the virtual service's TLS/HTTPS routes that are desired to be matched for changing weights.
          description: A list of TLS/HTTPS routes within VirtualService to edit. If omitted, VirtualService must have a single route of this type.
        tcpRoutes:
          type:
            - array
            - "null"
          items:
            type:
              - object
              - "null"
            properties:
              port:
                type:
                  - string
                  - "null"
                format: int64
                description: Port number of the TCP Route desired to be matched in the given Istio VirtualService.
            description: TCPRoute holds the information on the virtual service's TCP routes that are desired to be matched for changing weights.
          description: A list of TCP routes within VirtualService to edit. If omitted, VirtualService must have a single route of this type.
      title: IstioVirtualService holds information on the virtual service the rollout needs to modify
    title: VirtualServices references a list of Istio VirtualService to modify to shape traffic
title: IstioTrafficRouting configuration for Istio service mesh to enable fine grain configuration
$schema: http://json-schema.org/schema#
